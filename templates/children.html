{% extends 'base.html' %}

{% block title %}Daftar Anak - BabyGrow{% endblock %}

{% block content %}
<div class="container animate-fadeIn">
    <!-- Header -->
    <div class="flex justify-between items-center" style="margin-bottom: var(--space-xl);">
        <div>
            <h1 style="margin-bottom: var(--space-xs);">Anak Anda ğŸ‘¶</h1>
            <p class="text-muted">Kelola data anak-anak Anda</p>
        </div>
        <a href="{{ url_for('add_child') }}" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Tambah Anak
        </a>
    </div>
    
    {% if not children %}
    <!-- Empty State -->
    <div class="card empty-state">
        <div class="empty-state-icon">ğŸ‘¶</div>
        <h3 class="empty-state-title">Belum ada data anak</h3>
        <p class="empty-state-text">Tambahkan anak pertama Anda untuk mulai memantau pertumbuhan.</p>
        <a href="{{ url_for('add_child') }}" class="btn btn-primary btn-lg">
            <i class="bi bi-plus-circle"></i> Tambah Anak Pertama
        </a>
    </div>
    {% else %}
    <!-- Children Grid -->
    <div class="grid grid-2">
        {% for child in children %}
        <div class="card baby-card stagger-item">
            <div class="baby-avatar-placeholder">
                {% set gender = child.gender if child.gender else (child[3] if child[3] else '') %}
                {% if gender == 'Perempuan' %}ğŸ‘§{% elif gender == 'Laki-laki' %}ğŸ‘¦{% else %}ğŸ‘¶{% endif %}
            </div>
            
            <div class="baby-info" style="flex: 1;">
                <h3>{{ child.name if child.name else child[1] }}</h3>
                <p class="baby-age">
                    <i class="bi bi-calendar-heart"></i> 
                    {{ child.dob if child.dob else child[2] }}
                </p>
                <p class="text-sm text-muted">
                    {% if gender %}{{ gender }}{% endif %}
                </p>
            </div>
            
            <div class="flex flex-col gap-sm">
                <a href="{{ url_for('growth_list', child_id=child.id if child.id else child[0]) }}" class="btn btn-primary btn-sm">
                    ğŸ“Š Pertumbuhan
                </a>
                <a href="{{ url_for('milestone_list', child_id=child.id if child.id else child[0]) }}" class="btn btn-secondary btn-sm">
                    ğŸ¯ Milestone
                </a>
                <a href="{{ url_for('immunization_list', child_id=child.id if child.id else child[0]) }}" class="btn btn-success btn-sm">
                    ğŸ’‰ Imunisasi
                </a>
                <div style="display: flex; gap: var(--space-xs); flex-wrap: wrap; margin-top: var(--space-xs);">
                    <a href="{{ url_for('health_insights', child_id=child.id if child.id else child[0]) }}" class="btn btn-ghost btn-sm" title="Health Insights">
                        ğŸ§ 
                    </a>
                    <a href="{{ url_for('scheduled_letters', child_id=child.id if child.id else child[0]) }}" class="btn btn-ghost btn-sm" title="Surat Terjadwal">
                        ğŸ’Œ
                    </a>
                    <a href="{{ url_for('family_access', child_id=child.id if child.id else child[0]) }}" class="btn btn-ghost btn-sm" title="Akses Keluarga">
                        ğŸ‘¨â€ğŸ‘©â€ğŸ‘§
                    </a>
                    <a href="{{ url_for('edit_child', child_id=child.id if child.id else child[0]) }}" class="btn btn-ghost btn-sm" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}

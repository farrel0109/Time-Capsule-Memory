{% extends "base.html" %}

{% block title %}Edit {{ child.name if child.name else child[1] }} - BabyGrow{% endblock %}

{% block content %}
<div class="container animate-fadeIn">
    <div style="max-width: 600px; margin: 0 auto;">
        {% set child_id = child.id if child.id else child[0] %}
        {% set child_name = child.name if child.name else child[1] %}
        {% set child_dob = child.dob if child.dob else child[2] %}
        {% set child_gender = child.gender if child.gender else child[3] %}
        
        <!-- Header -->
        <div style="margin-bottom: var(--space-xl);">
            <a href="{{ url_for('children.view_child', child_id=child_id) }}" class="text-muted" style="display: inline-flex; align-items: center; gap: var(--space-xs); margin-bottom: var(--space-md);">
                <i class="bi bi-arrow-left"></i> Kembali
            </a>
            <h1 style="margin-bottom: var(--space-xs);">Edit Data Anak ‚úèÔ∏è</h1>
            <p class="text-muted">Update informasi {{ child_name }}</p>
        </div>
        
        <div class="card">
            <form method="POST" action="{{ url_for('children.edit_child', child_id=child_id) }}">
                <div class="form-group">
                    <label class="form-label" for="name">Nama Anak *</label>
                    <input type="text" id="name" name="name" class="form-input" 
                           value="{{ child_name }}" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="dob">Tanggal Lahir *</label>
                    <input type="date" id="dob" name="dob" class="form-input" 
                           value="{{ child_dob }}" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jenis Kelamin</label>
                    <div class="gender-selector">
                        <label class="gender-option {{ 'selected' if child_gender == 'Laki-laki' }}" id="gender-male">
                            <input type="radio" name="gender" value="Laki-laki" 
                                   {{ 'checked' if child_gender == 'Laki-laki' }} onclick="selectGender('male')">
                            <div class="gender-icon">üë¶</div>
                            <div>Laki-laki</div>
                        </label>
                        <label class="gender-option {{ 'selected' if child_gender == 'Perempuan' }}" id="gender-female">
                            <input type="radio" name="gender" value="Perempuan" 
                                   {{ 'checked' if child_gender == 'Perempuan' }} onclick="selectGender('female')">
                            <div class="gender-icon">üëß</div>
                            <div>Perempuan</div>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="blood_type">Golongan Darah</label>
                    <select id="blood_type" name="blood_type" class="form-select">
                        <option value="">-- Pilih --</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="AB">AB</option>
                        <option value="O">O</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="notes">Catatan</label>
                    <textarea id="notes" name="notes" class="form-textarea" rows="3"></textarea>
                </div>
                
                <div class="flex gap-md" style="margin-top: var(--space-xl);">
                    <button type="submit" class="btn btn-primary btn-lg" style="flex: 1;">
                        <i class="bi bi-check-circle"></i> Simpan Perubahan
                    </button>
                    <a href="{{ url_for('children.view_child', child_id=child_id) }}" class="btn btn-ghost btn-lg">
                        Batal
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function selectGender(gender) {
    document.querySelectorAll('.gender-option').forEach(el => el.classList.remove('selected'));
    document.getElementById('gender-' + gender).classList.add('selected');
}
</script>
{% endblock %}
